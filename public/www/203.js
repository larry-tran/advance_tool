"use strict";(self.webpackChunkargon_dashboard_angular=self.webpackChunkargon_dashboard_angular||[]).push([[203],{2203:(Y,f,c)=>{c.r(f),c.d(f,{AdminLayoutModule:()=>E});var h=c(529),u=c(646),p=c(6895),l=c(433),e=c(4650);const _=new e.OlP("WindowToken",typeof window<"u"&&window.document?{providedIn:"root",factory:()=>window}:{providedIn:"root",factory:()=>{}});var T=c(7579);let S=(()=>{class n{constructor(t,o,i){this.ngZone=t,this.document=o,this.window=i,this.copySubject=new T.x,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(t){this.config=t}copy(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});const o=this.copyFromContent(t);return this.pushCopyResponse(o?{content:t,isSuccess:o}:{isSuccess:!1,content:t})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(t,o=!0){try{this.selectTarget(t);const i=this.copyText();return this.clearSelection(o?t:void 0,this.window),i&&this.isCopySuccessInIE11()}catch{return!1}}isCopySuccessInIE11(){const t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))}copyFromContent(t,o=this.document.body){if(this.tempTextArea&&!o.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{o.appendChild(this.tempTextArea)}catch{throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;const i=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),i}destroy(t=this.document.body){this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(t,o){t&&t.focus(),o.getSelection()?.removeAllRanges()}createTempTextArea(t,o){const i="rtl"===t.documentElement.getAttribute("dir");let r;return r=t.createElement("textarea"),r.style.fontSize="12pt",r.style.border="0",r.style.padding="0",r.style.margin="0",r.style.position="absolute",r.style[i?"right":"left"]="-9999px",r.style.top=(o.pageYOffset||t.documentElement.scrollTop)+"px",r.setAttribute("readonly",""),r}pushCopyResponse(t){this.copySubject.observers.length>0&&this.ngZone.run(()=>{this.copySubject.next(t)})}pushCopyReponse(t){this.pushCopyResponse(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.R0b),e.LFG(p.K0),e.LFG(_,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),A=(()=>{class n{constructor(t,o,i,r){this.ngZone=t,this.host=o,this.renderer=i,this.clipboardSrv=r,this.cbOnSuccess=new e.vpe,this.cbOnError=new e.vpe,this.onClick=d=>{this.clipboardSrv.isSupported?this.targetElm&&this.clipboardSrv.isTargetValid(this.targetElm)?this.handleResult(this.clipboardSrv.copyFromInputElement(this.targetElm),this.targetElm.value,d):this.cbContent&&this.handleResult(this.clipboardSrv.copyFromContent(this.cbContent,this.container),this.cbContent,d):this.handleResult(!1,void 0,d)}}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.clickListener=this.renderer.listen(this.host.nativeElement,"click",this.onClick)})}ngOnDestroy(){this.clickListener&&this.clickListener(),this.clipboardSrv.destroy(this.container)}handleResult(t,o,i){let r={isSuccess:t,event:i};t?this.cbOnSuccess.observers.length>0&&(r=Object.assign(r,{content:o,successMessage:this.cbSuccessMsg}),this.ngZone.run(()=>{this.cbOnSuccess.emit(r)})):this.cbOnError.observers.length>0&&this.ngZone.run(()=>{this.cbOnError.emit(r)}),this.clipboardSrv.pushCopyResponse(r)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(S))},n.\u0275dir=e.lG2({type:n,selectors:[["","ngxClipboard",""]],inputs:{targetElm:["ngxClipboard","targetElm"],container:"container",cbContent:"cbContent",cbSuccessMsg:"cbSuccessMsg"},outputs:{cbOnSuccess:"cbOnSuccess",cbOnError:"cbOnError"}}),n})(),F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez]]}),n})();var a=c(2057);let I=(()=>{class n{constructor(t){this.activeModal=t}add(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.Kz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-note"]],inputs:{note:"note"},decls:12,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["placeholder","Title","type","text",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Content","type","text",1,"form-control",2,"margin-top","1rem",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Add"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4)(7,"input",5),e.NdJ("ngModelChange",function(r){return o.note.title=r}),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(r){return o.note.content=r}),e.qZA()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return o.add()}),e._uU(11,"Add"),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngModel",o.note.title),e.xp6(1),e.Q6J("ngModel",o.note.content))},dependencies:[l.Fj,l.JJ,l.On]}),n})();var m=c(5818);let x=(()=>{class n{constructor(t){this.http=t,this.noteUrl=`${m.C}/notes`}getNotes(t){return this.http.get(this.noteUrl+"/file/"+t)}addNotes(t){return this.http.post(this.noteUrl+"/add",t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(h.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function M(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"button",13),e.NdJ("cbOnSuccess",function(){const r=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.copy=r.content)})("contextmenu",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onRightClick(i))}),e.TgZ(2,"div")(3,"h3"),e._uU(4),e.qZA()()()()}if(2&n){const t=s.$implicit,o=e.oxw();e.xp6(1),e.s9C("ngbTooltip",o.copy===t.content?"Copied | Edit":"Copy to clipboard | Edit"),e.Q6J("cbContent",t.content),e.xp6(3),e.Oqu(t.title)}}const w=function(){return{flex:"1 0 auto"}};let g=(()=>{class n{constructor(t,o,i){this.route=t,this.noteService=o,this.modalService=i,this.fileId=null,this.notes=[],this.ngbModalOptions={backdrop:!1,keyboard:!1,centered:!0}}ngOnInit(){this.fileId=this.route.snapshot.paramMap.get("fileId"),this.getNotes(this.fileId)}getNotes(t){this.noteService.getNotes(t).subscribe(o=>{this.notes=o,console.log(o)})}openAddNoteModal(){const t=this.modalService.open(I,this.ngbModalOptions);t.componentInstance.note={title:"Test",content:"Test cont"},t.result.then(o=>{})}onRightClick(t){t.preventDefault(),console.log("Right click"),this.openAddNoteModal()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.gz),e.Y36(x),e.Y36(a.FF))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-icons"]],decls:13,vars:4,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow"],[1,"card-header","bg-transparent"],[1,"mb-0"],[1,"card-body"],[1,"row","icon-examples"],["class","col-lg-3 col-md-6",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-6"],["type","button","placement","top-center","triggers","hover focus click","ngxClipboard","",1,"btn-icon-clipboard",3,"ngbTooltip","cbContent","cbOnSuccess","contextmenu"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.qZA()(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h3",8),e._uU(9,"Notes"),e.qZA()(),e.TgZ(10,"div",9)(11,"div",10),e.YNc(12,M,5,3,"div",11),e.qZA()()()()()()),2&t&&(e.xp6(3),e.Akn(e.DdM(3,w)),e.xp6(9),e.Q6J("ngForOf",o.notes))},dependencies:[p.sg,a._L,A]}),n})(),b=(()=>{class n{constructor(t){this.http=t,this.url=`${m.C}/files`}getRoot(t){return this.http.post(this.url,{parentId:null,userId:t})}getByParentId(t,o){return this.http.post(this.url,{parentId:o,userId:t})}add(t){return this.http.post(`${this.url}/add`,t)}edit(t){return this.http.put(this.url,t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(h.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=c(1228);let Z=(()=>{class n{constructor(t,o,i){this.activeModal=t,this.fileService=o,this.authService=i,this.fileName=""}add(){this.activeModal.close({name:this.fileName,isFolder:this.isFolder})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.Kz),e.Y36(b),e.Y36(v.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-file"]],inputs:{isFolder:"isFolder"},decls:11,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["placeholder","Name","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4)(7,"input",5),e.NdJ("ngModelChange",function(r){return o.fileName=r}),e.qZA()(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return o.add()}),e._uU(10,"Add"),e.qZA()()),2&t&&(e.xp6(2),e.hij("Add ",o.isFolder?"Folder":"File",""),e.xp6(5),e.Q6J("ngModel",o.fileName))},dependencies:[l.Fj,l.JJ,l.On]}),n})();var k=c(7440);const N=function(){return{display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","text-overflow":"ellipsis"}};function R(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onClickFile(r))}),e.TgZ(2,"div",11)(3,"div",2)(4,"div",3)(5,"span",16),e._uU(6),e.qZA()(),e.TgZ(7,"div",17)(8,"div"),e._UZ(9,"i"),e.qZA()()()()()()}if(2&n){const t=s.$implicit;e.xp6(5),e.Akn(e.DdM(10,N)),e.s9C("ngbTooltip",t.name),e.xp6(1),e.Oqu(t.name),e.xp6(2),e.Gre("icon icon-shape ",t.isFolder?"bg-danger":"bg-info"," text-white rounded-circle shadow"),e.xp6(1),e.Tol(t.isFolder?"fa fa-folder":"fa fa-file")}}const D=function(){return{display:"flex","justify-content":"space-between"}};let C=(()=>{class n{constructor(t,o,i,r,d,J){this.modalService=t,this.fileService=o,this.route=i,this.authService=r,this.router=d,this.breadcrumb=J,this.parentId=null,this.userData=null,this.files=[],this.documentId="",this.ngbModalOptions={backdrop:!1,keyboard:!1,centered:!0},this.route.params.subscribe(y=>{y.fileId&&(this.documentId=y.fileId)})}ngOnInit(){this.parentId=this.route.snapshot.paramMap.get("fileId"),this.userData=this.authService.getUserData(),this.parentId?this.getChildFile(this.parentId):this.getRootFile()}getRootFile(){this.fileService.getRoot(this.userData.userId).subscribe(t=>{this.files=t})}getChildFile(t){this.fileService.getByParentId(this.userData.userId,t).subscribe(o=>{this.files=o})}openAddFileModal(t){const o=this.modalService.open(Z,this.ngbModalOptions);o.componentInstance.isFolder=t,o.result.then(i=>{i&&this.fileService.add({name:i.name,parentId:this.parentId,isFolder:t,userId:this.userData.userId}).subscribe(d=>{this.parentId?this.getChildFile(this.parentId):this.getRootFile()})})}onClickFile(t){t.isFolder?(this.router.navigate([`/folder/${t._id}`]),this.parentId=t._id,this.getChildFile(t._id)):(this.router.navigate([`/file/${t._id}`]),this.parentId=t._id,this.getChildFile(t._id))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.FF),e.Y36(b),e.Y36(u.gz),e.Y36(v.e),e.Y36(u.F0),e.Y36(k.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-tables"]],decls:16,vars:4,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow",2,"height","80vh"],[1,"card-header","bg-transparent"],[1,"mb-0"],[1,"button-group"],["type","button",1,"btn","btn-icon","btn-2","btn-primary","btn-lg",3,"click"],[1,"fa","fa-folder-plus"],[1,"fa","fa-file"],[1,"card-body"],[1,"row","icon-examples"],["class","col-xl-3 col-lg-6 mt-4",4,"ngFor","ngForOf"],[1,"col-xl-3","col-lg-6","mt-4"],[1,"card","card-stats","mb-4","mb-xl-0",3,"click"],["placement","top-center","triggers","hover focus click",1,"h2","font-weight-bold","mb-0",3,"ngbTooltip"],[1,"col-auto"]],template:function(t,o){1&t&&(e._UZ(0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),e._uU(7,"Folders"),e.qZA(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){return o.openAddFileModal(!0)}),e._UZ(10,"i",9),e.qZA(),e.TgZ(11,"button",8),e.NdJ("click",function(){return o.openAddFileModal(!1)}),e._UZ(12,"i",10),e.qZA()()(),e.TgZ(13,"div",11)(14,"div",12),e.YNc(15,R,10,11,"div",13),e.qZA()()()()()()),2&t&&(e.xp6(5),e.Akn(e.DdM(3,D)),e.xp6(10),e.Q6J("ngForOf",o.files))},dependencies:[p.sg,a._L]}),n})();const O=[{path:"folder/:fileId",component:C},{path:"folder",component:C},{path:"file",component:g},{path:"file/:fileId",component:g}];let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,u.Bz.forChild(O),l.u5,h.JF,a.IJ,F]}),n})()}}]);